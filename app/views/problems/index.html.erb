<div class="ideate-page container">
  <h2>Ideate</h2>

  <%= render "shared/ideate-tabs" %>

  <% @categories.each do |tag| %>
    <%= tag %>
    <% @problems.each do |problem| %>
      <% if problem.category === tag %>
        <%= link_to problem_path(problem) do %>
          <div>
            <h5><%= problem.title %></h5>
            <p><%=h truncate(problem.description, :length => 150) %></p>
          </div>

          <div class="actions">
            <% if Vote.where(votable: problem, user:  current_user).empty? %>
              <%= link_to upvote_problem_path(problem), method: :post, class: 'button'  do %>
                <i class="far fa-star"></i>
              <% end %>
            <% else %>
              <i class="fas fa-star"></i>
            <!-- comment button? -->
            <% end %>
            <p>Votes: <%= pluralize(problem.votes.count, "vote") %></p>
          </div>
        <% end %>
      <% end %>
    <% end %>
  <% end %>


  <%= link_to 'Share a problem', new_problem_path %>
  <%= link_to 'Leaderboard', leaderboard_problems_path %>
</div>
